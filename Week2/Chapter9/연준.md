# 타입 변환과 단축 평가

## 타입 변환이란?

### **명시적 타입 변환(explicit coercion) or 타입 캐스팅(type casting)**
개발자가 의도적으로 값의 타입을 변환하는것

### **암묵적 타입 변환(implicit coercion) or 타입 강제 변환(type coercion)**
개발자의 의도와는 상관없이 표현식을 평가하는 도중에 자바스크립트 엔진에 의해 암묵적으로 타입이 변환되는것

> 명시적 타입 변환이나 암묵적 타입 변환이 기존 원시 값을 직접 변경하는것은 아니다. 원시 값은 변경 불가능한 값이므로 변경할 수 없다. 타입 변환이란 기존 원시값을 사용해서 다른 타입의 새로운 원시 값을 생성하는 것이다.

## 암묵적 타입 변환
개발자의 의도와는 상관없이 표현식을 평가하는 도중에 자바스크립트 엔진에 의해 암묵적으로 타입이 변환되는것

### 문자열 타입으로 변환
문자열 연결 연산자 표현식을 평가하기 위해 문자열 연결 연산자의 피연산자 중에서 무낮열 타입이 아닌 피연산자를 문자열 타입으로 암묵적 타입 변환한다. 
> `Symbol`타입은 TypeError가 난다.
> `(Symbol()) + '' // TypeError: Cannot convert a Symbol value to string`

### 숫자 타입으로 변환
산술 연산자, 비교 연산자 표현식을 평가하기 위해 산술 연산자의 피연산자 중에서 숫자 타입이 아닌 피연산자를 숫자 타입으로 암묵적 타입 변환한다.

> 피연산자를 숫자 타입으로 변환할 수 없는 경우는 산술 연산을 수행할 수 없으므로 표현식의 평가 결과는 `NaN`이 된다.
> `"", [], null, false`는 `0`으로, `true`는 `1`로 변환된다. 객체와 빈 배열이 아닌 배열, `undefined`는 변환되지 않아 `NaN`이 된다.

### 불리언 타입으로 변환
조건식의 평가 결과를 불리언 타입으로 암묵적 타입 변환 한다.
이때 불리언 타입이 아닌 값을 `Truthy`값 또는 `Falsy`값으로 구분한다.

> `[false, undefined, null, 0, -0, NaN, '', ""]`값들만 `Falsy`값이다

---

## 명시적 타입 변환
개발자가 의도적으로 값의 타입을 변환하는것

### 문자열 타입으로 변환
1. `String` 생성자 함수를 `new`연산자 없이 호출하는 방법
2. `Object.prototype.toString` 메서드를 사용하는 방법
3. 문자열 연결 연산자(+)를 이용하는 방법

### 숫자 타입으로 변환
1. `Number` 생성자 함수를 `new` 연산자 없이 호출하는 방법
2. `parseInt`, `parseFloat` 함수를 이용하는 방법(문자열만 숫자 타입으로 변환 가능)
3. +단항 산술 연산자를 이용하는 방법
4. *산술 연산자를 이용하는 방법

#### `parseInt` 함수와 `Number` 생성자 함수의 차이점
- `parseInt`
    - `parseInt`함수는 문자열의 처음부터 시작하여 정수로 변환.
    - 처음에 숫자가 나오지 않을경우 `NaN` 반환.
    - 공백이나 숫자 이외의 문자를 만나면 변환을 중단하고 해당 위치 이전까지의 숫자만 반환.
    - 두 번째 매개변수로 진법(base)를 지정할 수 있음.
- `Number`
    - `Number` 함수는 전달된 값 전체를 숫자로 변환.
    - 문자열이 숫자로 시작되지 않거나 부동 소수점이 포함되어 있으면 해당 문자열은 `NaN`으로 평가됨
- 일반적으로 숫자로 변환할 떄는 `Number` 함수를 사용하는 것이 더 간편하며, 특정 진법의 문자열을 변환할 때는 `parseInt`를 사용할 수 있다.

### 불리언 타입으로 변환
1. `Boolean` 생성자 함수를 `new` 연산자 없이 호출하는 방법
2. ! 부정 논리 연산자를 두 번 사용하는 방법.

---

## 단축 평가
논리 연산의 결과를 결정하는 피연산자를 타입 변환하지 않고 그대로 반환하는 것. 표현식을 평가하는 도중에 평가 결과가 확정된 경우 나머지 평가 과정을 생략하는 것.
### 논리 연산자를 사용한 단축 평가

#### 논리곱(&&)연산자
두 개의 피연산자가 모두 `true`로 평가될 때 `true`를 반환한다. 좌항에서 우항으로 평가가 진행된다.

#### 논리합(||)연산자
두 개의 피연산자 중 하나만 `true`로 평가되어도 `true`를 반환한다. 좌항에서 우항으로 평가가 진행된다.

#### 단축 평가 규칙
|단축 평가 표현식|평가 결과|
|-------------------|--------------------|
|true /|/| anything|ture|
|flase /|/| |anything|
|true&&anything|anything|
|false&&anything|false|

---

### 옵셔널 체이닝 연산자 (`?.`)
좌항의 피연산자가 `null` 또는 `undefined`인 경우 `undefined`를 반환하고, 그렇지 않으면 우항의 프로퍼티 참조를 이어간다.

---

### null 병합 연산자 (`??`)
좌항의 피연산자가 `null` 또는 `undefined`인 경우 우항의 피연산자를 반환하고, 그렇지 않으면 좌항의 피연산자를 반환한다.
